# Exit Readiness OS LP - TODO

## 実装予定の機能

- [x] グローバルスタイルの設定（カラーパレット、フォント）
- [x] ヒーローセクション（ファーストビュー）の実装
- [x] 痛みの言語化セクションの実装
- [x] 解決の仕方セクションの実装
- [x] 主要機能セクションの実装
- [x] 信頼の担保セクションの実装
- [x] ウェイティングリストフォーム（中段）の実装
- [x] FAQセクションの実装
- [x] フッターの実装
- [x] ウェイティングリストフォーム機能（データベース保存）の実装
- [ ] サンクスメール送信機能の実装
- [x] GTMイベント計測の実装
- [x] レスポンシブデザインの調整
- [x] アニメーション効果の追加

## 新規修正依頼（全面的な作り直し）

- [x] 新しいコピーライティングの作成（7セクション）
- [x] ヒーローセクションの再設計（1on1テストセッション応募）
- [x] 「こんな状態を解決する」セクションの実装
- [x] 「解き方」3ステップセクションの実装
- [x] 主要機能5カードセクションの実装
- [x] モデルの前提と制約セクションの実装
- [x] FAQ（3-4個）の更新
- [x] 申込フォームの変更（1on1テストセッション用）
- [x] データベーススキーマの更新
- [x] トーンとデザインの調整（金融プロダクト寄り）

## 追加修正依頼（4つの改善点）

- [x] ターゲットの具体性を追加（都内DINK/プレDINK、世帯年収1,500〜3,000万、6,000〜8,000万レンジ）
- [x] プロダクトの実体を明確化（二本線比較、3指標の具体的表示）
- [x] オファーの確認（1on1テストセッション応募に統一）
- [x] トーン変更（「計算が足りない」→「計算しても変数が多すぎて決めきれない」）

## 修正ブリーフv2（プロダクトの核心を明確化）

- [x] 1. Heroセクションの修正（タグ、サブコピー、補足テキスト、右側グラフキャプション）
- [x] 2. 「年収も貯蓄もあるのに〜」セクションの修正（本文とカード4つのコピー具体化）
- [x] 3-1. 新セクション追加：「同じ前提で、未来を並べる」（3ステップカード）
- [x] 3-2. 新セクション追加：「見えるようになること」（5項目の指標説明）
- [x] 4. 注意書きセクションの微調整（3つの要素を明記）
- [x] 5. 1on1フォームの文言微調整

## LP指示書v4.0（OS全体版・全面作り直し）

- [x] S1: ヒーローセクション（OSビジョン × 入口としての住宅）
- [x] S2: 状態の言語化（家・仕事・場所・イベントが絡み合った決められなさ）
- [x] S3: Exit Readiness OSとは何か（OSコンセプト：世界線 × 安心ライン × 余白 + フラットなポジション）
- [x] S4: いま実際にできること（AS-IS：住宅モジュール中心）
- [x] S5: これから増えていく横串（To-Be：海外駐在・イベント横断）
- [x] S6: 3つの代表シナリオ（住宅×キャリア×イベントのミックスケース）
- [x] S7: この1on1で一緒にやること（オファー設計）
- [x] S8: 向いている人／向いていないか（+ フラットさの強調）
- [x] S9: モデルの前提と制約（+ フラットなポジションの明記）
- [x] S10: 1on1テストセッション応募フォーム

## LP修正指示v4.1（テキストと一部セクション構成の修正）

- [x] 1. Heroセクションの修正（サブコピー置き換え、ICPフィルタ追記、右側キャプション修正）
- [x] 2. S2「家だけじゃない」セクションの微修正（住宅レンジの具体化）
- [x] 3. S3「Exit Readiness OS説明」セクションの補強（フラットなOSの明示）
- [x] 4. 新セクション「代表シナリオ3本」の追加（最重要）
- [x] 5. 「いまできること」セクションへの数字例の追加
- [x] 6. 1on1セクションの微修正（他の世界線にも触れる旨を追加）
- [x] 7. 「向いている人／向いていない人」「モデルの前提と制約」のフラットさ強調
- [x] 8. 1on1応募フォームの導入文に一文追加

## 白文字が見えない問題の修正

- [x] S4「実際の世界線」セクションのタグが見えない問題を修正
- [x] 他のセクションでも同様の問題がないか確認
- [x] 全セクションのテキスト色とbackground色の組み合わせを検証

## LP修正指示v4.2（コピーと構造を尖らせる）+ 白文字問題修正

### v4.2の修正項目

- [x] 1-1. Hero見出しの尖鋭化（6,000万〜8,000万クラスの意思決定を追加）
- [x] 1-2. Heroサブコピーに「FP/住宅ツールとの違い」を1文追加
- [x] 1-3. Heroのすぐ下にミニCTAブロック追加
- [x] 2. S2「家だけじゃない」セクションの数字強化
- [x] 3-1. S3のWorldline/SafetyLine/Slackカードに数字の例を追加
- [x] 3-2. S3「フラットなOS」カードの本文末尾に1行追加
- [x] 4. S4「代表シナリオ」セクションの数字とインサイト具体化
- [x] 5. S5「いまできること」セクションに数字例カードを追加
- [x] 6. S6「これから増えていく機能」セクションのテキストをシャープに
- [x] 7. S7「この1on1で一緒にやること」セクションに出口を追加
- [x] 8. S10フォーム導入文の冒頭に1文追加

### 白文字問題の修正

- [x] S3のWorldline/SafetyLine/Slackカードのサブ見出しが見えない問題を修正

## LP修正指示v5.0（紹介制鮨屋モデル・全面改修）

### 設計思想
- [ ] 公開LPで1on1 Sessionを売らない（Sessionは紹介/昇格のみ）
- [ ] Pass 90日は公開オファーだが、決済URLは公開しない（Gate通過者のみ）
- [ ] 無料相談は作らない。無料で価値提供はしない
- [ ] 冷やかしは「Not fit」ではなく「Prep Mode（準備不足）」に落とす
- [ ] Gate前に「証拠パック（匿名サンプル）」を置き、5万円/数万円の納得感を非同期で作る

### 公開LPの改修

#### 3.1 絶対にやること
- [ ] ページ末尾の「1on1テストセッション応募フォーム」を撤去
- [ ] 公開LPの主CTAを「適合チェックに進む」に統一
- [ ] 決済ボタン、決済リンクは公開LPに置かない
- [ ] Sessionは「紹介/昇格のみ」の説明に留め、申込導線は出さない

#### 3.2 ヒーロー（ファーストビュー）差し替え
- [ ] 現状右上の小フォーム風UIを「準備チェック3問」コンポーネントに置換
- [ ] Q1: 意思決定期限はありますか（1か月以内/3か月以内/6か月以内/未定）
- [ ] Q2: 物件の価格帯は決まっていますか（決まっている/だいたい/未定）
- [ ] Q3: 主要な数字を入力できますか（入力できる/一部だけ/入力したくない）
- [ ] 主ボタン：適合チェックに進む（3分）
- [ ] 副ボタン：まだ準備中の方へ（レター登録）
- [ ] 注記：決済リンクは適合チェック通過者にのみご案内します

#### 3.3 ヒーロー直後に「証拠パック」セクションを新設
- [ ] カード1：意思決定メモ例（匿名）
- [ ] カード2：比較図例（匿名）
- [ ] カード3：FAQ（抜粋、3〜5問）
- [ ] セクション末尾CTA：適合チェックに進む（3分）

#### 3.4 Sessionの扱いを「カウンター席」として文章だけにする
- [ ] 90分のSessionは紹介制です（枠が限られるため公開しません）
- [ ] 適合チェック通過後、招待トークン保有者または昇格承認者にのみご案内します

#### 7. 既存LPから削除・置換する具体箇所
- [ ] 最下部の「1on1テストセッションに応募する」フォーム一式を削除
- [ ] 置換セクション：見出し「2つの入口」、Pass（公開）とSession（紹介/昇格のみ）の説明だけ
- [ ] CTA：適合チェックに進む（3分）、レター登録

### 新規ページの実装

#### 4. Fit Gate 12問ページ
- [ ] 新規ページ作成（/fit-gate）
- [ ] 進捗表示（12問中 X/12）
- [ ] 招待トークン入力欄（任意、冒頭or末尾）
- [ ] 12問の質問フォーム実装
- [ ] 送信後は「判定結果ページ」へ遷移

#### 5. 判定結果ページ（3パターン）
- [ ] 新規ページ作成（/fit-result）
- [ ] 状態A: Prep Mode（準備不足）
- [ ] 状態B: Ready Pass推奨（基本）
- [ ] 状態C: Ready Session解放（招待トークン有効 or 昇格）
- [ ] 判定ロジックの実装

#### 6. Prep Modeページ
- [ ] 新規ページ作成（/prep-mode）
- [ ] 登録フォーム（メールアドレス）
- [ ] 準備チェックリスト（期限、価格帯、入力数字）
- [ ] 再診断リンクを固定表示

### データベーススキーマ
- [ ] fitGateResponsesテーブルの作成
- [ ] prepModeSubscribersテーブルの作成
- [ ] invitationTokensテーブルの作成

### 完了条件チェック
- [ ] 公開LPからSessionの申込フォームに到達できない
- [ ] 公開LPに決済リンクが存在しない
- [ ] 公開LPに「証拠パック」セクションが追加されている
- [ ] ヒーロー右側が「準備チェック3問＋CTA」になっている
- [ ] Fit Gate 12問ページがあり、招待トークン欄がある
- [ ] 判定結果ページが3状態（Prep/Pass/Session解放）でデザインされている
- [ ] Prep Modeページがあり、再診断リンクが常設されている

## 最終修正指示v5.0（細部を詰めてICPの目線で90点台に乗せる）

### 1. Heroセクションの微調整
- [x] 1-1. 見出しの2行目を自然な日本語に（候補Aを採用）
- [x] 1-2. Heroサブコピーの締めを強くする（FP/住宅ツールとの違いを1文挿入）

### 2. 代表シナリオ3本の精度アップ
- [x] 2-1. Scenario形式の統一（前提・比較世界線・指標差分・インサイト1行）
- [x] 2-2. 各シナリオに結論インサイトを1行追加

### 3. AS-ISカードの粒度調整
- [ ] 3-1. 数字例カードは維持
- [ ] 3-2. 他の3カードを「何が判断できるか」ベースに書き換え

### 4. To-Be機能セクションの整理
- [ ] 各カード2文以内・言い切りの形に統一

### 5. CTA導線の整理
- [x] 5-1. Hero直下の「適合チェック」案内に1文追加
- [ ] 5-2. 1on1フォーム導入文に「適合チェック済み」前提を明示

### 6. Prep Modeサイドの微調整
- [x] Prep Mode説明に目的を1文追加

## LP v5 α公開準備（次ステップ指示）

### 1. α公開を本当に開始する
- [ ] 現行LP v5を本番環境に反映済み確認
- [ ] 表から誰でも到達できる状態にする（hidden URLではなく）
- [ ] 旧LPが残っている場合は/beta等に退避または301リダイレクト
- [ ] Exit Readiness OSの正式リンクを1本に決定（例：https://exit-os.xxx/）

### 2. Umamiイベントの動作確認とダッシュボード整備
- [ ] Umamiで以下のイベントが正しく発火しているか確認
  - [ ] lp_hero_cta_clicked
  - [ ] fitgate_started
  - [ ] fitgate_submitted
  - [ ] fitgate_result_session
  - [ ] fitgate_result_prep
  - [ ] fitgate_result_notyet
  - [ ] prep_registered
- [ ] LP専用ダッシュボードを1枚用意（1週間あたりのファネル可視化）
  - [ ] LP訪問数
  - [ ] Hero CTA → Fit Gate Start率
  - [ ] Fit Gate結果内訳（Session / Prep / Not yet）
  - [ ] Prep登録数
- [ ] 命名規則調整が必要なら統一

### 3. Evidence Packセクション：運用ルール定義
- [ ] 運用ルールをNotionにドキュメント化
  - [ ] 条件：fitgate_result_session → 1on1実施 → 3件溜まったタイミング
  - [ ] 各ケースカード（Case A/B/C）に載せる要素
    - [ ] 匿名化した前提（世帯年収レンジ/子ども有無/住宅レンジ/海外・仕事・イベント前提）
    - [ ] 比較した世界線（例：賃貸継続 vs 8,000万購入＋海外駐在）
    - [ ] 指標差分（40〜50代CF余裕/60歳資産/取り崩し開始年）
    - [ ] 1行インサイト（「このケースでは〜」で始まる結論）
  - [ ] 実装方法：3件出揃った時点でPdMとすり合わせてテキスト差し替え

### 4. Fit Gate / Prep Modeのログ設計
- [ ] スプレッドシートまたはDBテーブルで「FitGateLog」作成
  - [ ] カラム：timestamp, email, session_id/uuid, Q1〜Q12回答, 判定結果
- [ ] fitgate_result_*イベント発火時にログに行追加する実装
  - [ ] バックエンド側またはフロントからAPI経由

### 5. 1on1申込→実際のセッションまでの最低限オペ整備
- [ ] session_form_submitted時に飛ばすメールテンプレ（ドラフト）作成
  - [ ] 件名：[Exit OS] 1on1テストセッションのお申込みありがとうございます
  - [ ] 本文：申込内容サマリ、日程調整方法、セッションで用意してほしいもの
- [ ] 1on1セッション後に送る「世界線メモ」フォーマット作成（Google Docs可）
  - [ ] Evidence Packにも流用する前提

## LP Team / Dev への指示（確定版・今すぐやるべきこと）

### 1. Umamiダッシュボードを「運用品」に仕上げる
- [ ] 1本のファネルが1画面で見えるダッシュボードを作成
  - [ ] 期間：直近7日・30日が切り替えられる
  - [ ] 指標：LPユニークビジター数、Hero CTAクリック率、Fit Gate開始率／完了率、Session/Prep/NotYet比率、Prep登録率
- [ ] ダッシュボードURLを`docs/analytics.md`に追記

### 2. 1on1セッションを「実際に」開始する
- [ ] `fitgate_result_session`が出たユーザーに申込確認メールを送信（手動送信でOK）
- [ ] 日程調整（カレンダーまたは手動メール）
- [ ] 1on1実施
- [ ] `docs/`配下のフォーマットで「世界線メモ」を作成
- [ ] `FitGateResponses`テーブルに`session_done = true`をフラグとして記録
- [ ] セッション目標：まずは3件

### 3. Evidence Packセクションに Case A/B/C を埋める（セッション3件終了後）
- [ ] Case A/B/Cのそれぞれに以下を反映
  - [ ] 前提（年収レンジ／家族構成／住宅レンジ／海外・仕事・イベントの前提）
  - [ ] 比較した世界線
  - [ ] 指標差分（40〜50代CF、60歳資産、取り崩し開始年）
  - [ ] インサイト1行
- [ ] 匿名化・数値丸めは`docs/`に書いたルールどおりで実施

### 4. Fit Gate判定ロジックは「データ溜まるまで触らない」
- [ ] 20〜30件分の`FitGateResponses`が溜まるまでロジックに手を入れない
- [ ] ログをきれいに積むことだけに集中
- [ ] 判定結果の分布（Session/Prep/NotYet）をスプレッドシート上で可視化する準備を`docs/`に追記
- [ ] 年収レンジ／資産レンジ別の分布をスプレッドシート上で可視化する準備を`docs/`に追記

## 京都モデル v0.3 に基づくDistribution設計の全面修正

### 優先度1: 公開LPから1on1フォーム撤去、CTAをFit GateとPrep Modeに統一
- [x] 公開LPから1on1応募フォームを全廃
- [x] 公開LPから決済リンクを全廃
- [x] 公開LPからSessionの購入導線を全廃
- [x] 「テストセッション」という表現を禁止、「Decision Session」に統一
- [x] CTAを「適合チェックに進む（Fit Gate）」と「まだ準備中の方へ（Prep Mode）」に統一

### 優先度2: 証拠パック（匿名サンプル）セクションを追加
- [ ] 意思決定メモ例を追加
- [ ] 比較図例を追加
- [ ] FAQ（何をしないか、保証）を追加

### 優先度3: 準備チェック（3問）をGate前に追加
- [x] Q1: 世帯年収（静的表示）
- [x] Q2: 金融資産（静的表示）
- [x] Q3: 数字入力許容（静的表示）
- [x] 準備チェックは現在の静的表示のまま（ユーザー回答機能は実装せず）

### 優先度4: Fit Gate 12問ページと判定結果3状態ページの実装
- [ ] Fit Gate 12問を確定（意思決定期限、検討状況、価格帯レンジ、世帯年収レンジ、金融資産レンジ、数字入力許容、キャリア変動、支出増分岐、いま困っている問い、希望スタイル、情報の取り扱い同意、予算感）
- [x] 招待トークン欄（任意）を追加
- [x] 判定ロジックを修正：Session/Prep/Pass → Ready（Pass推奨）/Prep Mode/Session解放（招待/昇格の例外のみ）
- [ ] 判定結果ページを3状態に分離
  - [ ] 状態A: Prep Mode（準備不足）- レター登録 + 再診断リンク（常設）
  - [ ] 状態B: Ready（Pass推奨）- Passの案内 + 「決済URLを受け取る」ボタン
  - [ ] 状態C: Session解放（例外）- Sessionの案内 + 決済URL発行

### 優先度5: Pass購入後のOnboarding 3タスク実装
- [ ] シナリオ比較を1回
- [ ] レバー操作を1回（物件価格/頭金/投資入金/イベントなど）
- [ ] 意思決定メモを1回生成
- [ ] 完了しない限り、メイン機能に迷わず到達できる導線を固定

### 優先度6: Upgrade申請→Private Checkout（Session）実装
- [ ] Upgrade申請フォーム作成（期限、価格帯、分岐を短く聞く）
- [ ] 承認者にのみSession決済URLを発行
- [ ] Private Checkout（SessionのSOWサマリーと決済、共有不可・期限付き）

### 優先度7: 招待トークンの最小管理（コード有効/無効、使用済み）
- [x] 招待トークンDBテーブル設計（既存の`invitationTokens`テーブルを活用）
- [x] 招待トークン有効性チェック機能
- [x] 招待トークン使用済みフラグ管理

### 受け入れ基準（Doneの定義）
- [x] 公開LPに1on1応募フォームが存在しない
- [x] 公開LPに決済リンクが存在しない
- [x] Sessionは公開導線から購入不可
- [ ] Pass/Sessionの決済URLは通過者/承認者にのみ開示
- [ ] Prep Modeに再診断リンクが常設
- [ ] Pass購入者がOnboarding 3タスクを完了できる
- [ ] 意思決定メモの匿名サンプルが公開LPで見れる

## 京都モデル v0.3 End to End 実装

### フェーズ1: DBスキーマ追加
- [ ] passSubscriptionsテーブル作成（userId, email, purchaseDate, expiryDate, price, status）
- [ ] passOnboardingテーブル作成（userId, compareViewed, leverChanged, memoGenerated, completedAt）
- [ ] upgradeRequestsテーブル作成（userId, email, requestDate, status, approvedAt, checkoutUrl, checkoutExpiry）
- [ ] sessionCheckoutsテーブル作成（userId, checkoutUrl, expiryDate, isUsed, usedAt）

### フェーズ2: Pass購入フロー実装
- [ ] Ready判定結果ページに「Pass購入」ボタン追加
- [ ] Pass決済URL発行API実装（29,800円、90日期限）
- [ ] Pass購入完了後のリダイレクト処理
- [ ] Pass有効期限管理（90日後の同時刻まで）

### フェーズ3: Pass Onboarding 3タスク実装
- [ ] Onboardingページ作成（/pass/onboarding）
- [ ] タスク1: 比較を1回実行（compare_viewed=true）
- [ ] タスク2: レバーを1回操作（lever_changed=true）
- [ ] タスク3: 意思決定メモを1回生成（memo_generated=true）
- [ ] Onboarding完了判定ロジック
- [ ] Onboarding未完了時のメイン機能アクセス制限

### フェーズ4: Cockpit実装（シナリオ固定3本、レバー4つ）
- [ ] Cockpitページ作成（/pass/cockpit）
- [ ] シナリオA: Rent（現状ベースライン）
- [ ] シナリオB: Buy（物件価格を入れて比較）
- [ ] シナリオC: Buy + Shock（Buyに加えてショックを1つ適用）
- [ ] レバー1: 物件価格（数値入力＋スライダー）
- [ ] レバー2: 頭金（数値入力）
- [ ] レバー3: 毎月の投資入金（数値入力）
- [ ] レバー4: ショック選択（収入低下/-20% / 無収入期間/3か月 / 大型支出/100万円）
- [ ] 各シナリオの主要指標を横並びで表示（生存確率、FIRE/Exit到達指標、資産推移要約）

### フェーズ5: Decision Memo実装（3ブロック固定）
- [ ] Decision Memoページ作成（/pass/memo）
- [ ] ブロック1: 上限レンジ（OKライン/NGライン）
- [ ] ブロック2: 3シナリオ結論（Rent/Buy/Buy+Shockの要点）
- [ ] ブロック3: 次の30日アクション（更新すべき数字と順番）
- [ ] メモ生成ボタン実装
- [ ] メモ画面表示＋コピー可能機能

### フェーズ6: Upgrade申請フォーム実装
- [ ] Upgrade申請ボタン（Onboarding完了後のみ表示）
- [ ] Upgrade申請フォーム作成（期限、価格帯、分岐を短く聞く）
- [ ] Upgrade申請API実装
- [ ] 承認フロー実装（管理者承認）

### フェーズ7: Private Checkout実装（Session、48時間期限）
- [ ] Private CheckoutページURL生成（/checkout/session/:token）
- [ ] Session決済URL発行API（48時間期限、1回決済で無効化）
- [ ] SessionのSOWサマリー表示
- [ ] 決済完了後の処理（isUsed=true、usedAt記録）
- [ ] 期限切れチェック機能

### フェーズ8: Fit Gate判定結果ページ修正
- [ ] Ready結果ページ：Pass推奨のみ表示、Sessionは一切出さない
- [ ] Session解放結果ページ：Session購入導線を表示、併記でPassも表示
- [ ] Prep結果ページ：再診断リンク常設

### 完了条件（End to End）
- [ ] 公開LP → Fit Gate → Ready → Pass購入 → Onboarding 3タスク → Cockpit/Decision Memo の全フローが動作
- [ ] Pass購入者 → Upgrade申請 → 承認 → Private Checkout（Session）の全フローが動作
- [ ] Sessionは招待トークン有効 OR Upgrade承認時のみ解放
- [ ] Pass決済URLは公開LPに置かない、Gate通過後の導線でのみ到達
- [ ] Session決済URLは必ず秘匿、48時間期限、1回決済で無効化
